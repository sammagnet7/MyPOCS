package com.bagic.Channelservices.controller;



import static org.assertj.core.api.Assertions.assertThat;
import static org.mockito.Mockito.when;

import org.apache.catalina.core.ApplicationContext;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.mock.mockito.MockBean;

import com.bagic.Channelservices.extReqRespModel.QuickQuoteExtReq;
import com.bagic.Channelservices.extReqRespModel.QuickQuoteExtResp;
import com.bagic.Channelservices.infrastructure.TravelService;
import com.bagic.Channelservices.reqRespModel.QuickQuoteUiResp;
import com.bagic.Channelservices.reqRespModel.QuikQuoteUiReq;


@SpringBootTest 
class TravelControllerTest {
  
  
  @MockBean 
  private TravelService tsrv;
  
  @Autowired 
  private TravelController tc;
  
  @Qualifier("quikQuoteUiReqMock")
  private QuikQuoteUiReq qReq;
  
  //@Qualifier("quickQuoteExtRespMock")
  @Autowired
  private QuickQuoteExtResp qResp;
  
  private ApplicationContext ac;
	 
  
  @Test 
  void test() {
	  
	  
  
  // given	
	 when(tsrv.travelRestMethodCall(Mockito.any(QuickQuoteExtReq.class))).thenReturn(qResp);
	  	  
  // when 
	  QuickQuoteUiResp resp = tc.quickQuote(qReq);
  
  // then 
	  assertThat(resp).isEqualToComparingFieldByFieldRecursively(qResp);  
  }
  
  }
 